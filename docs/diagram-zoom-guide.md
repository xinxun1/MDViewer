# UML 图表缩放功能使用指南

## 🎯 功能介绍

现在你可以通过**双击 UML 图表**来放大查看细节！这个功能特别适合查看复杂的类图、时序图和部署图。

---

## 🖱️ 如何使用

### 方法 1：双击放大

1. **打开包含 UML 图的文档**
2. **双击任意 Mermaid 图表**
3. **图表会在全屏模态框中打开**

### 方法 2：鼠标悬停提示

- 鼠标悬停在图表上会显示提示："双击放大查看"
- 鼠标指针会变成放大镜图标 🔍

---

## 🎮 缩放控制

### 方法 A：使用底部控制栏

打开图表后，底部会出现控制栏：

```
[ − ]  [ 100% ]  [ + ]  [ ⟲ ]
  ↓       ↓        ↓      ↓
缩小   当前比例   放大   重置
```

- **[−]** - 缩小图表
- **[+]** - 放大图表
- **[⟲]** - 重置到 100%
- **100%** - 显示当前缩放比例

### 方法 B：键盘快捷键

| 按键 | 功能 |
|------|------|
| `+` 或 `=` | 放大 |
| `-` | 缩小 |
| `0` | 重置到 100% |
| `ESC` | 关闭缩放视图 |

### 方法 C：鼠标滚轮

- **向上滚动** - 放大图表
- **向下滚动** - 缩小图表

### 方法 D：关闭缩放视图

- 点击右上角的 **[×]** 按钮
- 点击图表外的背景区域
- 按 **ESC** 键

---

## 📏 缩放范围

- **最小缩放**：50%
- **最大缩放**：300%
- **默认大小**：100%

每次调整：±20%（通过按钮）或 ±10%（通过滚轮）

---

## 💡 使用场景

### 场景 1：查看复杂类图

```
问题：类图中类太多，属性和方法看不清
解决：双击放大到 150-200%，查看详细信息
```

### 场景 2：分析时序图流程

```
问题：时序图消息箭头密集，标签重叠
解决：放大到 180%，清楚看到每条消息
```

### 场景 3：研究部署图层次

```
问题：部署图嵌套层次多，难以分辨
解决：放大查看每个层次的细节
```

### 场景 4：演示和讲解

```
问题：需要向团队展示 UML 设计
解决：双击进入全屏模式，清晰展示
```

---

## 🎨 视觉效果

### 打开动画
- 淡入效果（0.2秒）
- 缩放动画（0.3秒）
- 黑色半透明背景（90% 不透明度）

### 悬停效果
- 图表边框高亮
- 阴影增强
- 鼠标指针变为放大镜

### 控制按钮
- 圆形按钮
- 半透明背景
- 毛玻璃效果（backdrop-filter）
- 悬停时放大和高亮

---

## ⚙️ 技术特性

### 响应式设计
- 自动适应窗口大小
- 最大宽度：95vw
- 最大高度：95vh

### 性能优化
- 使用 CSS transform（GPU 加速）
- 事件节流和防抖
- 克隆图表，不影响原图

### 浏览器兼容
- ✅ Chrome 86+
- ✅ Edge 86+
- ✅ Firefox（部分支持）
- ✅ Safari（部分支持）

---

## 🔧 自定义设置

### 修改缩放步长

编辑 `standalone-app.js`：

```javascript
// 按钮缩放步长（默认 0.2 = 20%）
this.zoomIn.addEventListener('click', () => this.adjustZoom(0.2));
this.zoomOut.addEventListener('click', () => this.adjustZoom(-0.2));

// 滚轮缩放步长（默认 0.1 = 10%）
const delta = e.deltaY > 0 ? -0.1 : 0.1;
```

### 修改缩放范围

```javascript
// 最小 50%，最大 300%
this.currentZoomScale = Math.max(0.5, Math.min(3, this.currentZoomScale + delta));

// 改为最小 30%，最大 500%
this.currentZoomScale = Math.max(0.3, Math.min(5, this.currentZoomScale + delta));
```

### 修改背景颜色

编辑 `markdown.css`：

```css
.diagram-zoom-modal {
    background: rgba(0, 0, 0, 0.9); /* 默认：90% 黑色 */
}

/* 改为更浅的背景 */
.diagram-zoom-modal {
    background: rgba(0, 0, 0, 0.7); /* 70% 黑色 */
}
```

---

## 📱 移动端支持

### 触摸手势

- **双击** - 打开/关闭缩放视图
- **双指捏合** - 放大/缩小（浏览器原生）
- **单击背景** - 关闭缩放视图

### 注意事项

- 移动端控制栏可能需要滚动查看
- 建议横屏查看大型图表
- 某些手势可能与浏览器冲突

---

## 🐛 常见问题

### Q: 双击没有反应？

**A**: 检查以下几点：
1. 刷新页面（Ctrl+F5）确保加载最新代码
2. 确认图表已完全渲染（显示为 SVG，不是代码）
3. 检查浏览器控制台是否有错误

### Q: 缩放后图表模糊？

**A**: 这是正常的，SVG 矢量图形放大不会失真。如果觉得模糊：
1. 检查显示器缩放设置
2. 确保浏览器缩放为 100%
3. 尝试重置缩放到 100%

### Q: 滚轮缩放不工作？

**A**: 
- 确保鼠标在图表上，不在背景上
- 某些浏览器可能禁用了滚轮事件
- 使用按钮或键盘快捷键代替

### Q: 关闭按钮点不到？

**A**:
- 使用 ESC 键关闭
- 点击图表外的背景区域
- 右上角按钮可能被遮挡，尝试移动图表

---

## 🎓 实用技巧

### 技巧 1：快速浏览

```
1. 双击打开图表
2. 用滚轮快速缩放
3. 按 ESC 关闭
```

### 技巧 2：精确查看

```
1. 双击打开
2. 按 + 键逐步放大到需要的大小
3. 按 0 重置，按 - 缩小
```

### 技巧 3：截图分享

```
1. 双击打开图表
2. 调整到合适大小
3. 按 PrtScn 截屏
4. 粘贴到其他应用
```

### 技巧 4：演示模式

```
1. 切换到预览模式（只看预览）
2. 双击图表进入全屏
3. 用键盘控制缩放
4. 流畅演示给观众
```

---

## 📊 效果对比

### 普通查看
```
[ 小型图表 - 细节模糊 ]
   在文档中正常大小显示
   适合概览
```

### 缩放查看
```
[ ════════ 大型图表 ════════ ]
[     所有细节清晰可见     ]
[   属性、方法、关系明确   ]
[     适合详细研究         ]
```

---

## 🚀 开始使用

**立即体验**：

1. **打开** `standalone.html`
2. **加载** 你的 UML 文档（如 `03_UML_Diagrams.md`）
3. **双击** 任意 Mermaid 图表
4. **享受** 清晰的放大视图！

---

## 💬 反馈与建议

如果你有任何建议或发现问题：

- 期望的功能
- 遇到的 Bug
- 使用体验

我们会持续改进这个功能！

---

**享受全新的 UML 图表查看体验！** 🎉
