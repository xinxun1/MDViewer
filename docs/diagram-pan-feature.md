# 图表拖动功能使用指南

## 功能概述

v1.7.0 新增了图表放大后的拖动（Pan）功能，让您可以更方便地查看大型 Mermaid 图表的各个部分。

## 使用方法

### 1. 打开图表缩放

- **双击** 任意 Mermaid 图表即可进入全屏缩放模式

### 2. 缩放图表

进入缩放模式后，您可以通过以下方式调整图表大小：

- **鼠标滚轮**：向上滚动放大，向下滚动缩小
- **键盘快捷键**：
  - `+` 或 `=`：放大
  - `-`：缩小
  - `0`：智能重置到最佳大小
- **工具栏按钮**：点击底部的 `+`、`-`、`100%` 按钮

### 3. 拖动查看（新功能）⭐

放大图表后，如果内容超出屏幕范围：

- **鼠标拖动**：按住鼠标左键并拖动即可移动图表位置
- **光标提示**：
  - 默认显示 "抓手"（grab）光标
  - 拖动时显示 "抓取中"（grabbing）光标

### 4. 关闭缩放

- 点击右上角的 **X** 按钮
- 点击图表外的背景区域
- 按 **Esc** 键

## 使用场景

### 适用情况

- 查看大型流程图的局部细节
- 检查复杂 UML 类图的特定类关系
- 浏览超宽的甘特图或时序图

### 操作技巧

1. **智能缩放**：打开图表后会自动适配最佳大小
2. **精确控制**：放大到需要的比例（最大 500%）
3. **自由拖动**：拖动到想查看的位置
4. **快速重置**：按 `0` 键返回最佳大小和居中位置

## 技术实现

### 核心功能

```javascript
// 拖动状态管理
this.isDragging = false;
this.translateX = 0;  // X 轴偏移
this.translateY = 0;  // Y 轴偏移

// transform 同时应用缩放和位移
transform: translate(${translateX}px, ${translateY}px) scale(${scale})
```

### 事件监听

- `mousedown`：开始拖动
- `mousemove`：计算位移
- `mouseup`：结束拖动

### 样式优化

- `overflow: hidden`：防止出现滚动条
- `cursor: grab/grabbing`：视觉反馈
- `user-select: none`：防止拖动时选中文字
- `pointer-events: none`：防止图表内部元素干扰拖动

## 注意事项

1. **仅支持鼠标拖动**：触摸屏设备暂不支持手势拖动
2. **拖动范围无限制**：可以将图表拖出视野，按 `0` 重置
3. **缩放优先级**：滚轮缩放与拖动可同时使用
4. **性能优化**：使用 CSS transform 实现硬件加速

## 更新日志

- **v1.7.0** (2026-01-12)
  - ✨ 新增图表拖动（Pan）功能
  - 🎨 优化光标样式和用户体验
  - 🐛 修复拖动时可能选中文字的问题
  - ⚡ 使用 transform 提升性能

## 相关文档

- [图表缩放功能指南](zoom-feature-ready.md)
- [Mermaid UML 使用指南](mermaid-uml-guide.md)
- [快速开始](quick-start.md)
