# 最近打开文件夹功能说明

## 功能概述

MD Viewer 现在支持保存最近打开的10个文件夹，让你可以快速在不同的工作目录之间切换。

## 主要特性

### 1. 自动保存历史记录
- 每次打开新文件夹时，自动保存到历史记录
- 最多保存10个最近打开的文件夹
- 使用 IndexedDB 持久化存储，关闭浏览器后依然保留

### 2. 快速切换目录
- 点击文件夹名称或图标即可切换到该目录
- 自动扫描并显示目录下的所有 Markdown 文件
- 保持文件树的层级结构显示

### 3. 智能管理
- 高亮显示当前活动的文件夹
- 鼠标悬停显示删除按钮
- 支持从列表中移除不需要的文件夹

## 使用方法

### 打开文件夹
1. 点击侧边栏的"打开文件夹"按钮
2. 选择包含 Markdown 文件的文件夹
3. 文件夹会自动添加到"最近打开"列表

### 切换文件夹
1. 在侧边栏找到"最近打开"区域
2. 点击任意文件夹名称
3. 应用会自动切换到该文件夹并加载文件

### 删除历史记录
1. 鼠标悬停在文件夹项上
2. 点击右侧出现的删除按钮 (×)
3. 该文件夹会从列表中移除

## 技术实现

### 数据存储
- 使用 IndexedDB 的 `recentFolders` object store
- 每个记录包含：
  - `id`: 自动生成的唯一标识
  - `handle`: 文件夹句柄（File System Access API）
  - `name`: 文件夹名称
  - `timestamp`: 添加时间戳

### 权限管理
- 切换文件夹时自动检查访问权限
- 如果权限过期，会提示用户重新授权
- 支持 Chrome 86+ 和 Edge 86+ 浏览器

## 注意事项

1. **浏览器兼容性**：需要使用支持 File System Access API 的浏览器（Chrome 86+, Edge 86+）
2. **权限管理**：浏览器可能会在一段时间后撤销文件夹访问权限，需要重新授权
3. **存储限制**：最多保存10个文件夹，超过后会自动删除最旧的记录

## 示例场景

### 多项目管理
如果你同时维护多个文档项目：
- `/project-a/docs` - 项目A的文档
- `/project-b/docs` - 项目B的文档
- `/personal/notes` - 个人笔记

只需各打开一次，之后就可以通过"最近打开"列表快速切换。

### 临时访问
打开临时文件夹后，如果不想保留在历史中，可以使用删除按钮移除。

## 未来改进

- [ ] 支持文件夹重命名显示
- [ ] 添加文件夹路径显示
- [ ] 支持拖拽排序
- [ ] 添加收藏夹功能
- [ ] 支持文件夹分组
